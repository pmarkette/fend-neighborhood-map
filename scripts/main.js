"use strict";function loadScript(){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB82oaqh1VTxwsHD3XH5ZjFi5CFMBFQdvE&callback=initialize",e.onerror=function(){console.log("Google maps could not be loaded")},document.body.appendChild(e)}function initialize(){ko.applyBindings(new ViewModel)}var beers=[{name:"Linden Street Brewery",lat:37.7994396,lng:-122.2882671},{name:"The Beer Shed",lat:37.7995263,lng:-122.2898785},{name:"Diving Dog Brewhouse",lat:37.8077394,lng:-122.2720127},{name:"Beer Revolution",lat:37.797173,lng:-122.2784187},{name:"The Trappist",lat:37.8005888,lng:-122.2763285},{name:"Drakeâ€™s Dealership",lat:37.8126375,lng:-122.2686281},{name:"Lost & Found",lat:37.8101617,lng:-122.271404},{name:"Woods Bar & Brewery",lat:37.807009,lng:-122.2726781},{name:"Independent Brewing Co.",lat:37.796432,lng:-122.2734581},{name:"Ale Industries",lat:37.776209,lng:-122.2303851}],Location=function(e){this.name=ko.observable(e.name),this.lat=ko.observable(e.lat),this.lng=ko.observable(e.lng)},ViewModel=function(){var e=this,t="http://www.google.com/mapfiles/marker.png",o="http://www.google.com/mapfiles/marker_green.png",n="red",r="green";e.beerList=ko.observableArray([]);var a=[];e.filter=ko.observable(""),e.currentLocation=ko.observable("Oakland, CA"),beers.forEach(function(t){e.beerList.push(new Location(t))}),this.drawMap=function(){var n,r={zoom:14,center:new google.maps.LatLng(37.796432,-122.2734581),mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT}},l=new google.maps.Map(document.getElementsByClassName("map-canvas")[0],r);for(n=0;n<e.beerList().length;n++){var s='<div id="content"><h3>'+e.beerList()[n].name()+"</h3></div>",i=new google.maps.InfoWindow({content:s}),c=new google.maps.LatLng(e.beerList()[n].lat(),e.beerList()[n].lng()),g=new google.maps.Marker({position:c,map:l,title:e.beerList()[n].name(),icon:o});a.push(g),google.maps.event.addListener(g,"click",e.markerReset),google.maps.event.addListener(i,"closeclick",e.markerReset),google.maps.event.addListener(g,"click",function(o,n,r){return function(){i.setContent(n),i.open(l,this),e.currentLocation(this.title),o.setIcon(t)}}(g,s,i))}},e.markerReset=function(){for(var e=0;e<a.length;e++)a[e].setIcon(o),$("h3").css("color",r)},e.stringStartsWith=function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},e.filteredItems=ko.computed(function(){var t=e.filter().toLowerCase();return t?ko.utils.arrayFilter(e.beerList(),function(o){return e.stringStartsWith(o.name().toLowerCase(),t)}):e.beerList()},e.beerList,a),e.filteredMarkers=ko.computed(function(){for(var t=0;t<e.filteredItems().length;t++)for(var o=0;o<a.length;o++)a[o].title===e.filteredItems()[t].name()?a[o].setVisible(!0):a[o].setVisible(!1);var n=e.filter().toLowerCase();if(!n)for(var r=0;r<a.length;r++)a[r].setVisible(!0)},e.filteredItems,a),e.selectBeer=function(o,r){e.markerReset();for(var l,s=$(r.target).text(),i=0;i<e.beerList().length;i++)s===e.beerList()[i].name()&&(l=a[i],a[i].setIcon(t),e.currentLocation(s));$(r.target).css("color",n),google.maps.event.trigger(l,"click")},e.drawMap()};window.onload=loadScript;var Yelp=require("yelp"),yelp=new Yelp({consumer_key:"qFWyVzFIKPXKkGvIb9GguQ",consumer_secret:"mCB7OIoZbSBYBCSSiCRXNvLh_bQ",token:"Jh7AVi2oGw1oNuVo1qiZHg4iYv9lb2ba",token_secret:"3DR3IHfnLAJ_M-t6kjUJOsl4cG4"});yelp.search({term:"food",location:"Montreal"}).then(function(e){console.log(e)})["catch"](function(e){console.error(e)}),yelp.business("yelp-san-francisco").then(console.log)["catch"](console.error),yelp.phoneSearch({phone:"+15555555555"}).then(console.log)["catch"](console.error),yelp.business("yelp-san-francisco",function(e,t){return e?console.log("error"):void console.log(t)});