"use strict";function loadScript(){var e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB82oaqh1VTxwsHD3XH5ZjFi5CFMBFQdvE&callback=initialize",e.onerror=function(){console.log("Google maps could not be loaded")},document.body.appendChild(e)}function initialize(){ko.applyBindings(new ViewModel)}var beers=[{name:"Linden Street Brewery",lat:37.7994396,lng:-122.2882671},{name:"The Beer Shed",lat:37.7995263,lng:-122.2898785},{name:"Diving Dog Brewhouse",lat:37.8077394,lng:-122.2720127},{name:"Beer Revolution",lat:37.797173,lng:-122.2784187},{name:"The Trappist",lat:37.8005888,lng:-122.2763285},{name:"Drakeâ€™s Dealership",lat:37.8126375,lng:-122.2686281},{name:"Lost & Found",lat:37.8101617,lng:-122.271404},{name:"Woods Bar & Brewery",lat:37.807009,lng:-122.2726781},{name:"Independent Brewing Co.",lat:37.796432,lng:-122.2734581},{name:"Ale Industries",lat:37.776209,lng:-122.2303851}],Location=function(e){this.name=ko.observable(e.name),this.lat=ko.observable(e.lat),this.lng=ko.observable(e.lng)},ViewModel=function(){var e=this,t="http://www.google.com/mapfiles/marker.png",n="http://www.google.com/mapfiles/marker_green.png",o="red",r="green";e.beerList=ko.observableArray([]);var a=[];e.filter=ko.observable(""),e.currentLocation=ko.observable("Oakland, CA"),beers.forEach(function(t){e.beerList.push(new Location(t))}),this.drawMap=function(){var o,r={zoom:14,center:new google.maps.LatLng(37.796432,-122.2734581),mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT}},i=new google.maps.Map(document.getElementsByClassName("map-canvas")[0],r);for(o=0;o<e.beerList().length;o++){var s='<div id="content"><h3>'+e.beerList()[o].name()+"</h3></div>",l=new google.maps.InfoWindow({content:s}),g=new google.maps.LatLng(e.beerList()[o].lat(),e.beerList()[o].lng()),c=new google.maps.Marker({position:g,map:i,title:e.beerList()[o].name(),icon:n});a.push(c),google.maps.event.addListener(c,"click",e.markerReset),google.maps.event.addListener(l,"closeclick",e.markerReset),google.maps.event.addListener(c,"click",function(n,o,r){return function(){l.setContent(o),l.open(i,this),e.currentLocation(this.title),n.setIcon(t)}}(c,s,l))}},e.markerReset=function(){for(var e=0;e<a.length;e++)a[e].setIcon(n),$("h3").css("color",r)},e.stringStartsWith=function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},e.filteredItems=ko.computed(function(){var t=e.filter().toLowerCase();return t?ko.utils.arrayFilter(e.beerList(),function(n){return e.stringStartsWith(n.name().toLowerCase(),t)}):e.beerList()},e.beerList,a),e.filteredMarkers=ko.computed(function(){for(var t=0;t<e.filteredItems().length;t++)for(var n=0;n<a.length;n++)a[n].title===e.filteredItems()[t].name()?a[n].setVisible(!0):a[n].setVisible(!1);var o=e.filter().toLowerCase();if(!o)for(var r=0;r<a.length;r++)a[r].setVisible(!0)},e.filteredItems,a),e.selectBeer=function(n,r){e.markerReset();for(var i,s=$(r.target).text(),l=0;l<e.beerList().length;l++)s===e.beerList()[l].name()&&(i=a[l],a[l].setIcon(t),e.currentLocation(s));$(r.target).css("color",o),google.maps.event.trigger(i,"click")},e.drawMap()};window.onload=loadScript;